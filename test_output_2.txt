
[1m[46m RUN [49m[22m [36mv4.0.14 [39m[90mC:/Users/jbenjumeamoreno/source/repos/belpolsim[39m

 [31mÃ”Ã˜Â»[39m src/engine/game.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[32m 39[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle CANVASS action[39m[32m 10[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle RALLY action[39m[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle POSTERS action[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle FUNDRAISE action[39m[32m 3[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle TV_AD action[39m[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should handle DEBATE action[39m[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should advance the turn[39m[32m 4[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m should regenerate energy[39m[32m 4[2mms[22m[39m
       [32mÃ”Â£Ã´[39m should trigger election when max turns reached[32m 1[2mms[22m[39m

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Failed Tests 8 Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»

 FAIL  src/engine/game.test.ts > Game Logic > Action Handlers > should handle CANVASS action
TypeError: Cannot read properties of undefined (reading 'antwerp')
 Ã”Ã˜Â» applyPollingChange src/engine/game.ts:11:19
      9|     const newState = JSON.parse(JSON.stringify(state)); // Deep copy
     10| 
     11|     if (!newState.polling[constituencyId]) {
       |                   ^
     12|         newState.polling[constituencyId] = {};
     13|     }
 Ã”Ã˜Â» performCanvas src/engine/game.ts:50:20
 Ã”Ã˜Â» handleAction src/engine/game.ts:279:20
 Ã”Ã˜Â» src/engine/game.test.ts:19:28

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[1/8]Ã”Ã„Â»

 FAIL  src/engine/game.test.ts > Game Logic > Action Handlers > should handle RALLY action
TypeError: Cannot read properties of undefined (reading 'antwerp')
 Ã”Ã˜Â» applyPollingChange src/engine/game.ts:11:19
      9|     const newState = JSON.parse(JSON.stringify(state)); // Deep copy
     10| 
     11|     if (!newState.polling[constituencyId]) {
       |                   ^
     12|         newState.polling[constituencyId] = {};
     13|     }
 Ã”Ã˜Â» performRally src/engine/game.ts:85:20
 Ã”Ã˜Â» handleAction src/engine/game.ts:281:20
 Ã”Ã˜Â» src/engine/game.test.ts:29:28

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[2/8]Ã”Ã„Â»

 FAIL  src/engine/game.test.ts > Game Logic > Action Handlers > should handle POSTERS action
TypeError: Cannot read properties of undefined (reading 'antwerp')
 Ã”Ã˜Â» applyPollingChange src/engine/game.ts:11:19
      9|     const newState = JSON.parse(JSON.stringify(state)); // Deep copy
     10| 
     11|     if (!newState.polling[constituencyId]) {
       |                   ^
     12|         newState.polling[constituencyId] = {};
     13|     }
 Ã”Ã˜Â» performPosters src/engine/game.ts:115:20
 Ã”Ã˜Â» handleAction src/engine/game.ts:283:20
 Ã”Ã˜Â» src/engine/game.test.ts:38:28

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[3/8]Ã”Ã„Â»

 FAIL  src/engine/game.test.ts > Game Logic > Action Handlers > should handle FUNDRAISE action
TypeError: Cannot read properties of undefined (reading 'antwerp')
 Ã”Ã˜Â» applyPollingChange src/engine/game.ts:11:19
      9|     const newState = JSON.parse(JSON.stringify(state)); // Deep copy
     10| 
     11|     if (!newState.polling[constituencyId]) {
       |                   ^
     12|         newState.polling[constituencyId] = {};
     13|     }
 Ã”Ã˜Â» performFundraise src/engine/game.ts:133:20
 Ã”Ã˜Â» handleAction src/engine/game.ts:285:20
 Ã”Ã˜Â» src/engine/game.test.ts:47:28

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[4/8]Ã”Ã„Â»

 FAIL  src/engine/game.test.ts > Game Logic > Action Handlers > should handle TV_AD action
TypeError: Cannot read properties of undefined (reading 'antwerp')
 Ã”Ã˜Â» applyPollingChange src/engine/game.ts:11:19
      9|     const newState = JSON.parse(JSON.stringify(state)); // Deep copy
     10| 
     11|     if (!newState.polling[constituencyId]) {
       |                   ^
     12|         newState.polling[constituencyId] = {};
     13|     }
 Ã”Ã˜Â» src/engine/game.ts:151:24
 Ã”Ã˜Â» applyRegionalPollingChange src/engine/game.ts:147:21
 Ã”Ã˜Â» performTvAd src/engine/game.ts:168:20
 Ã”Ã˜Â» handleAction src/engine/game.ts:287:20
 Ã”Ã˜Â» src/engine/game.test.ts:56:28

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[5/8]Ã”Ã„Â»

 FAIL  src/engine/game.test.ts > Game Logic > Action Handlers > should handle DEBATE action
TypeError: Cannot read properties of undefined (reading 'antwerp')
 Ã”Ã˜Â» applyPollingChange src/engine/game.ts:11:19
      9|     const newState = JSON.parse(JSON.stringify(state)); // Deep copy
     10| 
     11|     if (!newState.polling[constituencyId]) {
       |                   ^
     12|         newState.polling[constituencyId] = {};
     13|     }
 Ã”Ã˜Â» src/engine/game.ts:151:24
 Ã”Ã˜Â» applyRegionalPollingChange src/engine/game.ts:147:21
 Ã”Ã˜Â» performDebate src/engine/game.ts:210:20
 Ã”Ã˜Â» handleAction src/engine/game.ts:289:20
 Ã”Ã˜Â» src/engine/game.test.ts:64:28

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[6/8]Ã”Ã„Â»

 FAIL  src/engine/game.test.ts > Game Logic > End Turn > should advance the turn
TypeError: Cannot read properties of undefined (reading 'limburg')
 Ã”Ã˜Â» applyPollingChange src/engine/game.ts:11:19
      9|     const newState = JSON.parse(JSON.stringify(state)); // Deep copy
     10| 
     11|     if (!newState.polling[constituencyId]) {
       |                   ^
     12|         newState.polling[constituencyId] = {};
     13|     }
 Ã”Ã˜Â» src/engine/game.ts:310:24
 Ã”Ã˜Â» performAiMoves src/engine/game.ts:302:15
 Ã”Ã˜Â» endTurn src/engine/game.ts:344:16
 Ã”Ã˜Â» src/engine/game.test.ts:75:30

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[7/8]Ã”Ã„Â»

 FAIL  src/engine/game.test.ts > Game Logic > End Turn > should regenerate energy
TypeError: Cannot read properties of undefined (reading 'brussels_capital')
 Ã”Ã˜Â» applyPollingChange src/engine/game.ts:11:19
      9|     const newState = JSON.parse(JSON.stringify(state)); // Deep copy
     10| 
     11|     if (!newState.polling[constituencyId]) {
       |                   ^
     12|         newState.polling[constituencyId] = {};
     13|     }
 Ã”Ã˜Â» src/engine/game.ts:310:24
 Ã”Ã˜Â» performAiMoves src/engine/game.ts:302:15
 Ã”Ã˜Â» endTurn src/engine/game.ts:344:16
 Ã”Ã˜Â» src/engine/game.test.ts:82:30

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[8/8]Ã”Ã„Â»


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m8 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (9)[39m
[2m   Start at [22m 15:41:59
[2m   Duration [22m 2.81s[2m (transform 229ms, setup 452ms, import 313ms, tests 39ms, environment 1.60s)[22m

